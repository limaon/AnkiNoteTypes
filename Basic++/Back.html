<div class="prettify-flashcard">
  <!-- <div class="prettify-deck">{{Deck}}</div> -->
  {{#Tags}}
  <div class="prettify-tags">{{clickable:Tags}}</div>
  {{/Tags}}
  <div class="prettify-field prettify-field--front">{{edit:Front}}</div>
  <hr class="prettify-divider prettify-divider--answer" id="answer" />

  <div class="prettify-field prettify-field--back">
    <tts service="android" voice="pt">
      {{edit:Back}}
    </tts>
  </div>


  {{#Imagen}}
  <div>{{edit:Imagen}}</div>
  {{/Imagen}}

  <footer>
    {{#Keywords}}
    <a href="https://www.youtube.com/results?search_query={{Keywords}}" title="Youtube videos">Youtube</a>
    <!-- <a href="https://codemadness.org/idiotbox/?q={{Keywords}}" title="Tutorials videos">CodeMadness</a> -->
    <a href="https://duckduckgo.com/?t=ffab&q={{Keywords}}&ia=web" title="Search on web">DuckDuckGo</a>
    <a href="https://duckduckgo.com/?t=ffab&q={{Keywords}}+site%3Aqconcursos.com+intext%3AQuestões&t=ffab&ia=web"
      title="Questoes">Qconcusos</a>
    <!--<a href="https://www.qconcursos.com/questoes-de-concursos/questoes?q={{Keywords}}" title="Questoes">Qconcusos</a>-->
    <a href="https://duckduckgo.com/?t=ffab&q={{Keywords}}&iax=images&ia=images" title="Search Images">Images</a>
    <!-- <a href="https://www.phind.com/search?q={{Keywords}}" title="Search on Phind">Phind</a> -->
    <a href="https://chatgpt.com/?temporary-chat=true&model=gpt-4o&q={{Keywords}}" title="Search on ChatGPT">GPT-4o</a>
    <a href="https://chatgpt.com/?temporary-chat=true&model=o1&q={{Keywords}}" title="Search on ChatGPT">GPT-o1</a>
    <a href="https://you.com/search?q={{Keywords}}&fromSearchBar=true&tbm=youchat&chatMode=default" title="Search on Phind">YouAI</a>
    {{/Keywords}}
  </footer>

</div>

<script>
  // Split hierarchical tags
  var tagsContainerEl = document.querySelectorAll('.prettify-tags > *')
  if (tagsContainerEl.length > 0) {
    var tags = []
    tagsContainerEl.forEach((tagEl) => {
      tagEl.classList.add('prettify-tag')
      tags.push(tagEl.innerHTML)
      tags.forEach((tag) => {
        var childTag = tag.split('::').filter(Boolean)
        tagEl.innerHTML = childTag[childTag.length - 1].trim()
      })
    })
  } else {
    tagsContainerEl = document.querySelector('.prettify-tags')
    var tags = tagsContainerEl.innerHTML.split(' ').filter(Boolean)
    var html = ''
    tags.forEach((tag) => {
      var childTag = tag.split('::').filter(Boolean)
      html +=
        "<span class='prettify-tag'>" +
        childTag[childTag.length - 1] +
        '</span>'
    })
    tagsContainerEl.innerHTML = html
  }
</script>

<script>
  // Breadcrumbs to current deck
  var deckEl = document.querySelector('.prettify-deck')
  var subDecks = deckEl.innerHTML.split('::').filter(Boolean)
  html = []
  subDecks.forEach((subDeck) => {
    html.push("<span class='prettify-subdeck'>" + subDeck + '</span>')
  })
  deckEl.innerHTML = html.join('&nbsp;/&nbsp;')
</script>


<script>
  // Random colors for bold text;
  var randomIndex = Math.floor(Math.random() * 9 + 1);
  var randomColor = "var(--color-" + randomIndex + ")";
  document.documentElement.style.setProperty("--random-color", randomColor);
</script>


<script>
// Função para verificar se um elemento tem overflow
/*
function hasOverflow(element) {
  return element.scrollHeight > element.clientHeight;
}

const fields = document.querySelectorAll('.prettify-field--front, .prettify-field--back');

function checkOverflow() {
  fields.forEach(field => {
    field.classList.toggle('overflown', hasOverflow(field));
  });
}

// Chamar a função inicialmente e em um intervalo para atualizar
checkOverflow();
setInterval(checkOverflow, 100);*/
</script>


<script>
  // Zoom de imagens: clicar para ampliar, clicar novamente para desampliar
  // Usa event delegation para funcionar mesmo quando o DOM é atualizado (navegação entre cards)
  // Função global que funciona tanto no front quanto no back
  (function() {
    // Verifica se já existe um handler global (evita duplicação)
    if (!window.imageZoomHandler) {
      window.imageZoomHandler = function(e) {
        // Verifica se o clique foi em uma imagem dentro do flashcard
        if (e.target && e.target.tagName === 'IMG' && e.target.closest('.prettify-flashcard')) {
          e.target.classList.toggle('zoomed');
        }
      };

      // Anexa o listener com capture para garantir que funcione em todos os contextos
      document.addEventListener('click', window.imageZoomHandler, true);
    }
  })();
</script>
