/* --------------------- PREFERENCES */
:root {
	--card-max-width: 50em;
	--card-text-align: left;
	--font-size-regular: 20px;
	--font-size-small: 16px;
	--font-size-smallest: 12px;
	--font-family: "Inter", "Space Grotesk", -apple-system, system-ui, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
	--monospace-font-family: "JetBrains", -apple-system, system-ui;
	--img-width: 40%;
	--img-brightness: 0.75;
	--img-filter: none;
	--color-1: #81C784;
	--color-2: #d3e667;
	--color-3: #1E88E5;
	--color-4: #00897B;
	--color-5: #00ACC1;
	--color-6: #FFC107;
	--color-7: #FF7043;
	--color-8: #64B5F6;
	--color-9: #66BB6A;
}

/* --------------------- COLORS */
/* Light theme - variables in :root */
:root {
	--text-fg: #333333e6;
	--text-fg-faint: #333333cc;
	--text-bg-selected: #3333331a;
	--card-bg: #ffffff;
	--card-border: #f7f7f7;
	--card-box-shadow: #3c42570f;
	--divider: #3333331a;
	--tag-fg: #333333cc;
	--tag-bg: #3333330f;
	--tag-fg-active: #333333;
	--tag-bg-active: #3333331a;
	--tag-border: transparent;
	--cloze-fg: #348ccb;
	--cloze-bg: transparent;
	--link-fg: #2a70a2;
	--link-bg: transparent;
	--link-fg-active: #2f7eb6;
	--link-bg-active: transparent;
	--bold-fg: var(--text-fg);
	--italic-fg: var(--text-fg);
	--bold-italic-fg: var(--text-fg);
	--underline-fg: var(--text-fg);
	--random-color: var(--color-1);
}

/* Dark mode - ALL selectors for cross-platform support */
:root.night-mode,
:root[data-bs-theme="dark"],
:root[data-darkreader-scheme="dark"],
.night_mode,
.card.night_mode,
.nightMode {
	--text-fg: #ffffffe6;
	--text-fg-faint: #ffffffb3;
	--text-bg-selected: #ffffff1f;
	--card-bg: #2e2f31;
	--card-border: #ffffff0a;
	--card-box-shadow: #0000001f;
	--divider: #ffffff1f;
	--tag-fg: #ffffffb3;
	--tag-bg: #ffffff14;
	--tag-fg-active: #ffffff;
	--tag-bg-active: #ffffff1f;
	--tag-border: transparent;
	--cloze-fg: #99ebff;
	--cloze-bg: transparent;
	--link-fg: #5da3d5;
	--link-bg: transparent;
	--link-fg-active: #71afda;
	--link-bg-active: transparent;
}

/* --------------------- BACKGROUND */
.card {
	text-align: justify;
	background-color: #cfd6d8;
	cursor: default;
	padding: 0.5em 0;
}

:root.night-mode .card,
.night_mode .card,
.nightMode .card {
	background-color: #242426;
}

html:not(.mobile) .card {
	padding: 0.5em;
}

.card::-webkit-scrollbar {
	display: none;
}

/* --------------------- FLASHCARD */
.prettify-flashcard {
	background-color: var(--card-bg);
	border-radius: 0.50em;
	border: 2px solid var(--card-border);
	box-shadow: var(--card-box-shadow) 0px 7px 14px 0px, var(--card-box-shadow) 0px 3px 6px 0px;
	color: var(--text-fg);
	font-family: var(--font-family);
	font-size: var(--font-size-regular);
	margin: 0.2em auto;
	line-height: 1.5;
	max-width: var(--card-max-width);
	text-align: var(--card-text-align);
	word-wrap: break-word;
	letter-spacing: 0.1px;
}

.prettify-flashcard::selection {
	background-color: var(--text-bg-selected);
}

/* --------------------- FIELDS */
.prettify-field {
	/*margin: 0.6em 1.20em 1.60em 1.20em;*/
	margin: 0.8em 0.8em 0.8em 0.8em;
	text-align: justify;
	text-justify: inter-word;

}

.mobile .prettify-field {
	margin: 0.2em 0.5em 0.5em;
}

.prettify-field--front {
	padding: 0em 0.8em;
}

.prettify-field--front,
.prettify-field--back {
	min-height: auto;
	max-height: auto;
	/*max-height: 320px;*/
	overflow: auto;
}

/*
  .overflown {
	  border-bottom: 2px solid var(--card-border);
	  border-radius: 8px;
  }*/

::-webkit-scrollbar {
	display: none;
}

.prettify-field--back {
	color: var(--text-fg-faint);
	font-size: var(--font-size-small);
	margin: 0.6em 2.60em 1.60em 2.60em;
}

/* --------------------- CLOZE */
.cloze {
	background-color: var(--cloze-bg);
	color: var(--random-color, var(--cloze-fg));
	font-weight: bold;
}

/* --------------------- DECK */
.prettify-deck {
	margin: 2em;
	display: flex;
	color: var(--text-fg-faint);
	font-size: var(--font-size-small);
	white-space: nowrap;
}

.mobile .prettify-deck {
	margin: 1em;
}

.prettify-subdeck {
	text-decoration: underline;
	text-overflow: ellipsis;
	overflow: hidden;
}

/* --------------------- TAGS */
.prettify-tags {
	margin: 0em 2em;
	display: flex;
	flex-flow: row wrap;
	font-size: var(--font-size-smallest);
	justify-content: flex-end;
}

.mobile .prettify-tags {
	margin: 0em 1em
}

.prettify-tag {
	all: initial;
	background-color: var(--tag-bg);
	border-radius: 0em 0em 0.6em 0.6em;
	/* border: 1px dashed var(--tag-border); */
	color: var(--tag-fg);
	display: inline;
	font-size: var(--font-size-smallest);
	font-family: var(--monospace-font-family);
	margin: 0 0.5em 0.5em 0;
	padding: 0.30em 0.8em;
	transition: all 0.25s;
	word-break: break-word;
}

.prettify-tag:before {
	content: ' ';
}

.prettify-tag:hover {
	background-color: var(--tag-bg-active);
	/* border: 1px solid var(--tag-border); */
	color: var(--tag-fg-active);
	cursor: pointer;
}

/* --------------------- DIVIDER */
.prettify-divider {
	background-color: transparent;
	border: none;
	border-bottom: 2px dashed var(--divider);
	margin: 1em;
	padding: 0;
}

.prettify-divider--answer {
	border-bottom: 2px dashed var(--divider);
}

/* --------------------- IMAGES */
img {
	border-radius: 0.25em;
	display: block;
	margin: 1em auto;
	max-width: var(--img-width) !important;
	transition: transform 0.3s ease, box-shadow 0.3s ease, filter 0.3s ease, background-color 0.3s ease;
	background-color: transparent;
	cursor: zoom-in;
}

.night_mode img {
	/* filter: invert(0) hue-rotate(180deg);*/
	filter: invert(0);
	opacity: 0.95;
}

img.zoomed {
	position: fixed;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
	max-width: 90% !important;
	max-height: 90vh;
	object-fit: contain;
	z-index: 100;
	box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
	background-color: #fff;
	cursor: zoom-out;
}

body:has(img.zoomed)::before {
	content: '';
	position: fixed;
	top: 0;
	left: 0;
	width: 100vw;
	height: 100vh;
	background-color: rgba(0, 0, 0, 0.75);
	z-index: 99;
}

/* Ajuste para mobile - overlay cobre toda a tela */
html.mobile body:has(img.zoomed)::before,
.mobile body:has(img.zoomed)::before {
	width: 100% !important;
	height: 100% !important;
	min-width: 100vw !important;
	min-height: 100vh !important;
	right: 0 !important;
	bottom: 0 !important;
	top: 0 !important;
	left: 0 !important;
	margin: 0 !important;
	padding: 0 !important;
}

img+br {
	display: none;
}

/* --------------------- TABLES */
table {
	border-collapse: separate;
	border-spacing: 0;
	margin: 0 auto;
	max-width: 100%;
}

table thead {
	background-color: var(--card-border);
}

table tr:nth-of-type(even) {
	background-color: var(--card-border);
}

table tr:first-child th:first-child {
	border-top-left-radius: 0.5em;
}

table tr:first-child th:last-child {
	border-top-right-radius: 0.5em;
}

table tr:last-child td:first-child {
	border-bottom-left-radius: 0.5em;
}

table tr:last-child td:last-child {
	border-bottom-right-radius: 0.5em;
}

table th {
	border-bottom: solid 1px var(--text-bg-selected);
	border-left: solid 1px var(--text-bg-selected);
	border-top: solid 1px var(--text-bg-selected);
	padding: 0.5em;
}

table th:last-child {
	border-right: solid 1px var(--text-bg-selected);
}

table td {
	border-bottom: solid 1px var(--text-bg-selected);
	border-left: solid 1px var(--text-bg-selected);
	padding: 0.5em;
}

table td:last-of-type {
	border-right: solid 1px var(--text-bg-selected);
}

/* --------------------- HYPERLINKS */
a,
a:visited {
	text-decoration: none;
	color: var(--link-fg);
	border-radius: 0.25em;
	padding: 0 0.1em;
	transition: all 0.1s;
}

a:hover,
a:active {
	text-decoration: underline;
	color: var(--link-fg-active);
	background-color: var(--link-bg-active);
}

/* --------------------- FORMATTING */
b,
strong {
	color: var(--random-color, var(--text-fg));
}

i,
em {
	color: var(--italic-fg);
}

b>i,
i>b {
	color: var(--bold-italic-fg);
}

u {
	color: var(--underline-fg);
}

pre {
	white-space: normal;
}

/* --------------------- FOOTER */
footer {
	font-size: var(--font-size-smallest);
	text-align: center;
	border-radius: 1em 1em 0em 0em;
	border: 0.1rem solid var(--card-border);
	border-bottom: none;
	margin: 0em 2em;
	padding: 8px;
	background-color: var(--card-border);
}

footer>a {
	text-decoration: none;
}

footer>a:after {
	content: "·";
	color: var(--link-fg);
	display: inline-block;
	width: 12px;
}

footer>a:last-child:after {
	content: "";
	width: 0;
}


/* --------------------- CUSTOM FONTS */
@font-face {
	font-family: Inter;
	/* src: local("Inter-Regular"), url("_Inter-Regular.woff2") format("woff2"); */
	src: local("Inter-Regular"), url("_Inter-Regular.ttf") format("truetype");
	font-style: normal;
	font-weight: normal;
}

@font-face {
	font-family: Inter;
	/* src: local("Inter-Bold"), url("_Inter-Bold.woff2") format("wofff2"); */
	src: local("Inter-Bold"), url("_Inter-Bold.ttf") format("truetype");
	font-style: normal;
	font-weight: bold;
}

@font-face {
	font-family: Inter;
	/* src: local("Inter-Italic"), url("_Inter-Italic.woff2") format("wofff2"); */
	src: local("Inter-Italic"), url("_Inter-Italic.ttf") format("truetype");
	font-style: italic;
	font-weight: normal;
}

@font-face {
	font-family: Inter;
	/* src: local("Inter-BoldItalic"), url("_Inter-BoldItalic.woff2") format("wofff2"); */
	src: local("Inter-BoldItalic"), url("_Inter-BoldItalic.ttf") format("truetype");
	font-style: italic;
	font-weight: bold;
}

@font-face {
	font-family: "Ubuntu";
	src: url("_Ubuntu.ttf");
	font-style: normal;
	font-weight: normal;
}

@font-face {
	font-family: "JetBrains";
	src: url("_JetBrains.ttf");
	font-style: normal;
	font-weight: normal;
}

/* --------------------- TYPEANS STYLING */
#typeans {
	display: block;
	width: 80%;
	max-height: 600px;
	padding: 10px;
	margin: 0 auto;
	border: 1px solid var(--color-3);
	border-radius: 6px;
	background-color: var(--card-bg);
	font-family: "JetBrains", monospace;
	font-size: var(--font-size-small);
	color: var(--text-fg);
	box-sizing: border-box;
	transition: border-color 0.3s, box-shadow 0.3s, background-color 0.3s;
	text-align: left;
}

#typeans:focus {
	border-color: var(--color-3);
	box-shadow: 0 0 8px rgba(74, 144, 226, 0.6);
	/* Azul claro */
	outline: none;
	background-color: var(--card-bg);
}

#typeans.centered {
	text-align: center;
	margin: 20px auto;
}

.typeGood {
	font-weight: bold;
}

.typeBad {
	text-decoration: underline;
}

.typeMissed {
	font-style: italic;
}

.centered {
	text-align: center;
	margin: 20px auto;
}

#typearrow {
	font-size: 24px;
	text-align: center;
	display: block;
}

@media (max-width: 600px) {
	#typeans {
		width: 90%;
		font-size: var(--font-size-small);
		padding: 10px;
		max-height: 90%;
	}
}

/* Ajuste para mobile - imagem ampliada */
.mobile img.zoomed {
	max-width: 95% !important;
	max-height: 95vh;
	top: 50%;
	left: 50%;
	transform: translate(-50%, -50%);
}

.mjx-container {
	overflow-x: auto;
	overflow-y: hidden;
	max-width: 100%;
	font-size: 0.2em;
	padding: 1em 0em;
}